from PyQt5 import QtCore, QtGui, QtWidgets
import traningML as tm

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(796, 897)
        Form.setStyleSheet("background-color:#292929;color:#FFDE59;")
        self.heading = QtWidgets.QLabel(Form)
        self.heading.setGeometry(QtCore.QRect(260, 40, 271, 51))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(20)
        font.setBold(True)
        font.setWeight(75)
        self.heading.setFont(font)
        self.heading.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.heading.setFocusPolicy(QtCore.Qt.NoFocus)
        self.heading.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.heading.setStyleSheet("color:white;border: 1px outset #FFDE59;border-style: none none outset none;")
        self.heading.setAlignment(QtCore.Qt.AlignCenter)
        self.heading.setObjectName("heading")
        self.result_data = QtWidgets.QGroupBox(Form)
        self.result_data.setGeometry(QtCore.QRect(130, 220, 551, 631))
        font = QtGui.QFont()
        font.setFamily("MV Boli")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.result_data.setFont(font)
        self.result_data.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.result_data.setStyleSheet("")
        self.result_data.setAlignment(QtCore.Qt.AlignCenter)
        self.result_data.setObjectName("result_data")
        self.label1 = QtWidgets.QLabel(self.result_data)
        self.label1.setGeometry(QtCore.QRect(50, 40, 461, 81))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setUnderline(False)
        font.setWeight(75)
        self.label1.setFont(font)
        self.label1.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.label1.setStyleSheet("border: 1px dotted #FFDE59; color: white;")
        self.label1.setAlignment(QtCore.Qt.AlignJustify|QtCore.Qt.AlignVCenter)
        self.label1.setObjectName("label1")
        self.age = QtWidgets.QTextEdit(self.result_data)
        self.age.setGeometry(QtCore.QRect(280, 60, 191, 41))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.age.setFont(font)
        self.age.viewport().setProperty("cursor", QtGui.QCursor(QtCore.Qt.IBeamCursor))
        self.age.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.age.setAutoFillBackground(False)
        self.age.setStyleSheet("border: 1px solid #FFDE59; color: white;")
        self.age.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        self.age.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        self.age.setLineWrapColumnOrWidth(10)
        self.age.setObjectName("age")
        self.label1_2 = QtWidgets.QLabel(self.result_data)
        self.label1_2.setGeometry(QtCore.QRect(50, 140, 461, 81))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setUnderline(False)
        font.setWeight(75)
        self.label1_2.setFont(font)
        self.label1_2.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.label1_2.setStyleSheet("border: 1px dotted #FFDE59; color: white;")
        self.label1_2.setAlignment(QtCore.Qt.AlignJustify|QtCore.Qt.AlignVCenter)
        self.label1_2.setObjectName("label1_2")
        self.label1_3 = QtWidgets.QLabel(self.result_data)
        self.label1_3.setGeometry(QtCore.QRect(50, 240, 461, 81))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setUnderline(False)
        font.setWeight(75)
        self.label1_3.setFont(font)
        self.label1_3.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.label1_3.setStyleSheet("border: 1px dotted #FFDE59; color: white;")
        self.label1_3.setAlignment(QtCore.Qt.AlignJustify|QtCore.Qt.AlignVCenter)
        self.label1_3.setObjectName("label1_3")
        self.label1_4 = QtWidgets.QLabel(self.result_data)
        self.label1_4.setGeometry(QtCore.QRect(50, 340, 461, 81))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setUnderline(False)
        font.setWeight(75)
        self.label1_4.setFont(font)
        self.label1_4.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.label1_4.setStyleSheet("border: 1px dotted #FFDE59; color: white;")
        self.label1_4.setAlignment(QtCore.Qt.AlignJustify|QtCore.Qt.AlignVCenter)
        self.label1_4.setObjectName("label1_4")
        self.label1_5 = QtWidgets.QLabel(self.result_data)
        self.label1_5.setGeometry(QtCore.QRect(50, 440, 461, 81))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setUnderline(False)
        font.setWeight(75)
        self.label1_5.setFont(font)
        self.label1_5.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.label1_5.setStyleSheet("border: 1px dotted #FFDE59; color: white;")
        self.label1_5.setAlignment(QtCore.Qt.AlignJustify|QtCore.Qt.AlignVCenter)
        self.label1_5.setObjectName("label1_5")
        self.detect_button = QtWidgets.QPushButton(self.result_data)
        self.detect_button.setGeometry(QtCore.QRect(140, 550, 281, 51))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(20)
        font.setBold(True)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(75)
        self.detect_button.setFont(font)
        self.detect_button.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.detect_button.setMouseTracking(False)
        self.detect_button.setStyleSheet(
            "*{color: white; border: 1px solid '#FFDE59'; border-radius: 15%;}" +
            "*:hover{background-color:'#FFDE59';color:'#22041C';border: 2px solid '#EE3EC9'}")
        self.detect_button.setObjectName("detect_button")
        self.bodyPain = QtWidgets.QComboBox(self.result_data)
        self.bodyPain.setGeometry(QtCore.QRect(280, 160, 191, 41))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(18)
        font.setBold(True)
        font.setWeight(75)
        self.bodyPain.setFont(font)
        self.bodyPain.setStyleSheet("border: 1px solid #FFDE59; color: white;")
        self.bodyPain.setEditable(False)
        self.bodyPain.setDuplicatesEnabled(False)
        self.bodyPain.setFrame(True)
        self.bodyPain.setObjectName("bodyPain")
        self.bodyPain.addItem("")
        self.bodyPain.addItem("")
        self.breathConj = QtWidgets.QComboBox(self.result_data)
        self.breathConj.setGeometry(QtCore.QRect(280, 360, 191, 41))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(18)
        font.setBold(True)
        font.setWeight(75)
        self.breathConj.setFont(font)
        self.breathConj.setStyleSheet("border: 1px solid #FFDE59; color: white;")
        self.breathConj.setEditable(False)
        self.breathConj.setDuplicatesEnabled(False)
        self.breathConj.setFrame(True)
        self.breathConj.setObjectName("breathConj")
        self.breathConj.addItem("")
        self.breathConj.addItem("")
        self.breathConj.addItem("")
        self.cold = QtWidgets.QComboBox(self.result_data)
        self.cold.setGeometry(QtCore.QRect(280, 460, 191, 41))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(18)
        font.setBold(True)
        font.setWeight(75)
        self.cold.setFont(font)
        self.cold.setStyleSheet("border: 1px solid #FFDE59; color: white;")
        self.cold.setEditable(False)
        self.cold.setDuplicatesEnabled(False)
        self.cold.setFrame(True)
        self.cold.setObjectName("cold")
        self.cold.addItem("")
        self.cold.addItem("")
        self.temp = QtWidgets.QTextEdit(self.result_data)
        self.temp.setGeometry(QtCore.QRect(280, 260, 191, 41))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.temp.setFont(font)
        self.temp.viewport().setProperty("cursor", QtGui.QCursor(QtCore.Qt.IBeamCursor))
        self.temp.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.temp.setAutoFillBackground(False)
        self.temp.setStyleSheet("border: 1px solid #FFDE59; color: white;")
        self.temp.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        self.temp.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        self.temp.setLineWrapColumnOrWidth(1)
        self.temp.setObjectName("temp")
        self.l1 = QtWidgets.QLabel(Form)
        self.l1.setGeometry(QtCore.QRect(130, 130, 271, 71))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setUnderline(False)
        font.setWeight(75)
        self.l1.setFont(font)
        self.l1.setCursor(QtGui.QCursor(QtCore.Qt.ForbiddenCursor))
        self.l1.setStyleSheet("border: 1px dotted #EE3EC9; color: white;")
        self.l1.setAlignment(QtCore.Qt.AlignJustify|QtCore.Qt.AlignVCenter)
        self.l1.setObjectName("l1")
        self.l1_2 = QtWidgets.QLabel(Form)
        self.l1_2.setGeometry(QtCore.QRect(410, 130, 271, 71))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setUnderline(False)
        font.setWeight(75)
        self.l1_2.setFont(font)
        self.l1_2.setCursor(QtGui.QCursor(QtCore.Qt.ForbiddenCursor))
        self.l1_2.setStyleSheet("border: 1px dotted #EE3EC9; color: white;")
        self.l1_2.setAlignment(QtCore.Qt.AlignJustify|QtCore.Qt.AlignVCenter)
        self.l1_2.setObjectName("l1_2")
        self.probOfVirus = QtWidgets.QLabel(Form)
        self.probOfVirus.setGeometry(QtCore.QRect(290, 150, 91, 31))
        font = QtGui.QFont()
        font.setFamily("Gabriola")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.probOfVirus.setFont(font)
        self.probOfVirus.setCursor(QtGui.QCursor(QtCore.Qt.ForbiddenCursor))
        self.probOfVirus.setStyleSheet("border: 1px solid #FFDE59; color: white;")
        self.probOfVirus.setAlignment(QtCore.Qt.AlignCenter)
        self.probOfVirus.setObjectName("probOfVirus")
        self.resultOfEval = QtWidgets.QLabel(Form)
        self.resultOfEval.setGeometry(QtCore.QRect(580, 150, 81, 31))
        font = QtGui.QFont()
        font.setFamily("MV Boli")
        font.setPointSize(6)
        font.setBold(True)
        font.setWeight(75)
        self.resultOfEval.setFont(font)
        self.resultOfEval.setCursor(QtGui.QCursor(QtCore.Qt.ForbiddenCursor))
        self.resultOfEval.setStyleSheet("border: 1px solid #FFDE59; color: white;")
        self.resultOfEval.setAlignment(QtCore.Qt.AlignCenter)
        self.resultOfEval.setObjectName("resultOfEval")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)
        
        self.detect_button.clicked.connect(self.predictingModel)
        
    def predictingModel(self):
        ageData = self.age.toPlainText()
        temp = self.temp.toPlainText()
        bdyPain = self.bodyPain.currentText()
        breath = self.breathConj.currentText()
        cold = self.cold.currentText()
        lst = []
        lst.extend([float(temp),bdyPain,int(ageData),breath,cold])
        lst = [1 if i=="Yes" else -1 if i=="Slightly" else 0 if i=="No" else i for i in lst]
        
        clf = tm.predict()
        
        infection = clf.predict_proba([lst])
        infect = (infection[0][1] * 100)
        
        if(infect>50):
            result = "Infected"
        else:
            result="Non-Infected"
        
        
        cure = format(infection[0][0] * 100,".3f")
        
        self.probOfVirus.setText(str(cure)+"%")
        self.resultOfEval.setText(result)    
        
    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "Form"))
        self.heading.setText(_translate("Form", "Covi-Detector"))
        self.label1.setText(_translate("Form", "              Enter your Age :"))
        self.age.setHtml(_translate("Form", "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n"
"<html><head><meta name=\"qrichtext\" content=\"1\" /><style type=\"text/css\">\n"
"p, li { white-space: pre-wrap; }\n"
"</style></head><body style=\" font-family:\'Gabriola\'; font-size:14pt; font-weight:600; font-style:normal;\">\n"
"<p align=\"center\" style=\"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:\'MV Boli\'; font-size:10pt;\"><br /></p></body></html>"))
        self.label1_2.setText(_translate("Form", "           Do you feel Body Pain? "))
        self.label1_3.setText(_translate("Form", "        Enter your temperature (°F) :"))
        self.label1_4.setText(_translate("Form", "           Breathing Congestion :"))
        self.label1_5.setText(_translate("Form", "           Cough and Cold :"))
        self.detect_button.setText(_translate("Form", "Detect"))
        self.bodyPain.setCurrentText(_translate("Form", "No", "7"))
        self.bodyPain.setItemText(0, _translate("Form", "No"))
        self.bodyPain.setItemText(1, _translate("Form", "Yes"))
        self.breathConj.setCurrentText(_translate("Form", "No", "7"))
        self.breathConj.setItemText(0, _translate("Form", "No"))
        self.breathConj.setItemText(2, _translate("Form", "Yes"))
        self.breathConj.setItemText(1, _translate("Form", "Slightly"))
        self.cold.setCurrentText(_translate("Form", "No", "7"))
        self.cold.setItemText(0, _translate("Form", "No"))
        self.cold.setItemText(1, _translate("Form", "Yes"))
        self.temp.setHtml(_translate("Form", "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n"
"<html><head><meta name=\"qrichtext\" content=\"1\" /><style type=\"text/css\">\n"
"p, li { white-space: pre-wrap; }\n"
"</style></head><body style=\" font-family:\'Gabriola\'; font-size:14pt; font-weight:600; font-style:normal;\">\n"
"<p align=\"center\" style=\"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:\'MV Boli\'; font-size:10pt;\"><br /></p></body></html>"))
        self.l1.setText(_translate("Form", "  Recovering Probability:"))
        self.l1_2.setText(_translate("Form", "     RESULT of Evaluation:"))
        self.probOfVirus.setText(_translate("Form", "NA%"))
        self.resultOfEval.setText(_translate("Form", "-"))
        Form.setWindowIcon(QtGui.QIcon('img/covid.ico'))


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    Form = QtWidgets.QWidget()
    ui = Ui_Form()
    ui.setupUi(Form)
    Form.show()
    sys.exit(app.exec_())
